"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[7872],{7915:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var r=i(4848),s=i(8453);const o={title:"ROS 2 Architecture - Nodes, Topics, Services, Actions",description:"Understanding ROS 2 architecture with nodes, topics, services, and actions for robotic applications",tags:["ROS 2","Architecture","Nodes","Topics","Services","Actions","Middleware"]},t="ROS 2 Architecture - Nodes, Topics, Services, Actions",c={id:"week-3-5/ros2-architecture-nodes-topics-services-actions",title:"ROS 2 Architecture - Nodes, Topics, Services, Actions",description:"Understanding ROS 2 architecture with nodes, topics, services, and actions for robotic applications",source:"@site/docs/week-3-5/ros2-architecture-nodes-topics-services-actions.md",sourceDirName:"week-3-5",slug:"/week-3-5/ros2-architecture-nodes-topics-services-actions",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/week-3-5/ros2-architecture-nodes-topics-services-actions",draft:!1,unlisted:!1,editUrl:"https://github.com/JaveriaNigar/New-Physical-AI-and-Humanoid-Robotics/docs/week-3-5/ros2-architecture-nodes-topics-services-actions.md",tags:[{label:"ROS 2",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/tags/ros-2"},{label:"Architecture",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/tags/architecture"},{label:"Nodes",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/tags/nodes"},{label:"Topics",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/tags/topics"},{label:"Services",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/tags/services"},{label:"Actions",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/tags/actions"},{label:"Middleware",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/tags/middleware"}],version:"current",frontMatter:{title:"ROS 2 Architecture - Nodes, Topics, Services, Actions",description:"Understanding ROS 2 architecture with nodes, topics, services, and actions for robotic applications",tags:["ROS 2","Architecture","Nodes","Topics","Services","Actions","Middleware"]},sidebar:"tutorialSidebar",previous:{title:"Robot Data Flow - Sensor\u2192Processing\u2192Actuation",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/week-3-5/robot-data-flow"},next:{title:"ROS 2 with Python - rclpy Usage",permalink:"/New-Physical-AI-and-Humanoid-Robotics/docs/week-3-5/ros2-with-python-rclpy"}},l={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to ROS 2 Architecture",id:"introduction-to-ros-2-architecture",level:2},{value:"Nodes in ROS 2",id:"nodes-in-ros-2",level:2},{value:"Node Structure",id:"node-structure",level:3},{value:"Node Lifecycle",id:"node-lifecycle",level:3},{value:"Topics and Publishers/Subscribers",id:"topics-and-publisherssubscribers",level:2},{value:"Creating a Publisher",id:"creating-a-publisher",level:3},{value:"Creating a Subscriber",id:"creating-a-subscriber",level:3},{value:"Topic Communication Pattern",id:"topic-communication-pattern",level:3},{value:"Quality of Service (QoS) Settings",id:"quality-of-service-qos-settings",level:3},{value:"Services",id:"services",level:2},{value:"Creating a Service Server",id:"creating-a-service-server",level:3},{value:"Creating a Service Client",id:"creating-a-service-client",level:3},{value:"Actions",id:"actions",level:2},{value:"Action Structure",id:"action-structure",level:3},{value:"Creating an Action Server",id:"creating-an-action-server",level:3},{value:"Creating an Action Client",id:"creating-an-action-client",level:3},{value:"Communication Pattern Selection",id:"communication-pattern-selection",level:2},{value:"When to Use Topics (Publish/Subscribe)",id:"when-to-use-topics-publishsubscribe",level:3},{value:"When to Use Services",id:"when-to-use-services",level:3},{value:"When to Use Actions",id:"when-to-use-actions",level:3},{value:"Network Communication in ROS 2",id:"network-communication-in-ros-2",level:2},{value:"DDS Implementation Options",id:"dds-implementation-options",level:3},{value:"Network Configuration",id:"network-configuration",level:3},{value:"Advanced Communication Patterns",id:"advanced-communication-patterns",level:2},{value:"Latched Topics",id:"latched-topics",level:3},{value:"Message Filters",id:"message-filters",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Message Size",id:"message-size",level:3},{value:"Network Bandwidth",id:"network-bandwidth",level:3},{value:"CPU Usage",id:"cpu-usage",level:3},{value:"Debugging ROS 2 Communication",id:"debugging-ros-2-communication",level:2},{value:"Tools for Analysis",id:"tools-for-analysis",level:3},{value:"Example Debugging Workflow",id:"example-debugging-workflow",level:3},{value:"ROS 2 Architecture for Humanoid Robots",id:"ros-2-architecture-for-humanoid-robots",level:2},{value:"Sensor Integration Architecture",id:"sensor-integration-architecture",level:3},{value:"Control Architecture",id:"control-architecture",level:3},{value:"Diagram: Humanoid Robot Communication Architecture",id:"diagram-humanoid-robot-communication-architecture",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Resource Management",id:"resource-management",level:3},{value:"Exercises",id:"exercises",level:2},{value:"Quiz",id:"quiz",level:2},{value:"Reflection",id:"reflection",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"ros-2-architecture---nodes-topics-services-actions",children:"ROS 2 Architecture - Nodes, Topics, Services, Actions"}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, students will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Explain the fundamental concepts of ROS 2 architecture"}),"\n",(0,r.jsx)(n.li,{children:"Implement nodes, topics, services, and actions in ROS 2"}),"\n",(0,r.jsx)(n.li,{children:"Design appropriate communication patterns for robotic applications"}),"\n",(0,r.jsx)(n.li,{children:"Analyze and optimize ROS 2 communication for performance and reliability"}),"\n",(0,r.jsx)(n.li,{children:"Apply ROS 2 architecture principles to humanoid robot systems"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"introduction-to-ros-2-architecture",children:"Introduction to ROS 2 Architecture"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 (Robot Operating System 2) is a flexible framework for writing robot software. Unlike traditional ROS, ROS 2 is built on DDS (Data Distribution Service), which provides better support for real-time systems, multi-robot systems, and commercial products."}),"\n",(0,r.jsx)(n.p,{children:"The core components of ROS 2 architecture include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nodes"}),": Processes that perform computation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics"}),": Named buses over which nodes exchange messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),": Synchronous request/response communication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Actions"}),": Asynchronous goal/fetch/receive pattern for long-running tasks"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"nodes-in-ros-2",children:"Nodes in ROS 2"}),"\n",(0,r.jsx)(n.p,{children:"Nodes are the basic execution units of a ROS 2 program. Each node runs a specific task or set of tasks within a robotic system."}),"\n",(0,r.jsx)(n.h3,{id:"node-structure",children:"Node Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MyNode(Node):\r\n    def __init__(self):\r\n        super().__init__('node_name')\r\n        # Initialize publishers, subscribers, services, etc.\r\n        self.get_logger().info('Node has been started')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = MyNode()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"node-lifecycle",children:"Node Lifecycle"}),"\n",(0,r.jsx)(n.p,{children:"In ROS 2, nodes can have different lifecycle states to manage complex applications:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Unconfigured \u2192 Inactive \u2192 Active \u2192 Finalized"}),"\n",(0,r.jsx)(n.li,{children:"This helps manage resource usage and system complexity"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"topics-and-publisherssubscribers",children:"Topics and Publishers/Subscribers"}),"\n",(0,r.jsx)(n.p,{children:"Topics provide a publish/subscribe communication pattern in ROS 2. This is ideal for sensor data, robot state information, and other continuously updated data streams."}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-publisher",children:"Creating a Publisher"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_publisher')\r\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = 'Hello World: %d' % self.i\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\r\n        self.i += 1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-subscriber",children:"Creating a Subscriber"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'topic',\r\n            self.listener_callback,\r\n            10)\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"topic-communication-pattern",children:"Topic Communication Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph LR\r\n    A[Publisher Node] --\x3e B[Topic: sensor_data]\r\n    C[Subscriber Node 1] --\x3e B\r\n    D[Subscriber Node 2] --\x3e B\r\n    E[Subscriber Node 3] --\x3e B\n"})}),"\n",(0,r.jsx)(n.h3,{id:"quality-of-service-qos-settings",children:"Quality of Service (QoS) Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, QoSHistoryPolicy, QoSReliabilityPolicy\r\n\r\n# Example QoS profile for sensor data\r\nqos_profile = QoSProfile(\r\n    history=QoSHistoryPolicy.KEEP_LAST,\r\n    depth=10,\r\n    reliability=QoSReliabilityPolicy.BEST_EFFORT,\r\n    durability=QoSDurabilityPolicy.VOLATILE\r\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"services",children:"Services"}),"\n",(0,r.jsx)(n.p,{children:"Services provide a synchronous request/response communication pattern. This is useful for operations that require immediate responses, such as configuration changes or single calculations."}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-service-server",children:"Creating a Service Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MinimalService(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_service')\r\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\r\n\r\n    def add_two_ints_callback(self, request, response):\r\n        response.sum = request.a + request.b\r\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\r\n        return response\n"})}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-service-client",children:"Creating a Service Client"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MinimalClientAsync(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_client_async')\r\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\r\n        while not self.cli.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('service not available, waiting again...')\r\n        self.req = AddTwoInts.Request()\r\n\r\n    def send_request(self, a, b):\r\n        self.req.a = a\r\n        self.req.b = b\r\n        self.future = self.cli.call_async(self.req)\r\n        rclpy.spin_until_future_complete(self, self.future)\r\n        return self.future.result()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"actions",children:"Actions"}),"\n",(0,r.jsx)(n.p,{children:"Actions are used for long-running tasks that require feedback and the ability to cancel. This is perfect for navigation, manipulation, and other complex robotic behaviors."}),"\n",(0,r.jsx)(n.h3,{id:"action-structure",children:"Action Structure"}),"\n",(0,r.jsx)(n.p,{children:"An action has three parts:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": The request to start a long-running task"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Feedback"}),": Information sent back during execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": The final outcome of the task"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"creating-an-action-server",children:"Creating an Action Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.action import ActionServer\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.action import Fibonacci\r\n\r\nclass FibonacciActionServer(Node):\r\n    def __init__(self):\r\n        super().__init__('fibonacci_action_server')\r\n        self._action_server = ActionServer(\r\n            self,\r\n            Fibonacci,\r\n            'fibonacci',\r\n            self.execute_callback)\r\n\r\n    def execute_callback(self, goal_handle):\r\n        self.get_logger().info('Executing goal...')\r\n        \r\n        feedback_msg = Fibonacci.Feedback()\r\n        feedback_msg.sequence = [0, 1]\r\n        \r\n        for i in range(1, goal_handle.request.order):\r\n            if goal_handle.is_cancel_requested:\r\n                goal_handle.canceled()\r\n                self.get_logger().info('Goal canceled')\r\n                return Fibonacci.Result()\r\n            \r\n            feedback_msg.sequence.append(\r\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\r\n            \r\n            goal_handle.publish_feedback(feedback_msg)\r\n            \r\n        goal_handle.succeed()\r\n        result = Fibonacci.Result()\r\n        result.sequence = feedback_msg.sequence\r\n        return result\n"})}),"\n",(0,r.jsx)(n.h3,{id:"creating-an-action-client",children:"Creating an Action Client"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.action import ActionClient\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.action import Fibonacci\r\n\r\nclass FibonacciActionClient(Node):\r\n    def __init__(self):\r\n        super().__init__('fibonacci_action_client')\r\n        self._action_client = ActionClient(\r\n            self,\r\n            Fibonacci,\r\n            'fibonacci')\r\n\r\n    def send_goal(self, order):\r\n        goal_msg = Fibonacci.Goal()\r\n        goal_msg.order = order\r\n\r\n        self._action_client.wait_for_server()\r\n        self._send_goal_future = self._action_client.send_goal_async(\r\n            goal_msg,\r\n            feedback_callback=self.feedback_callback)\r\n\r\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\r\n\r\n    def goal_response_callback(self, future):\r\n        goal_handle = future.result()\r\n        if not goal_handle.accepted:\r\n            self.get_logger().info('Goal rejected')\r\n            return\r\n\r\n        self.get_logger().info('Goal accepted')\r\n        self._get_result_future = goal_handle.get_result_async()\r\n        self._get_result_future.add_done_callback(self.get_result_callback)\r\n\r\n    def feedback_callback(self, feedback_msg):\r\n        feedback = feedback_msg.feedback\r\n        self.get_logger().info('Received feedback: {0}'.format(feedback.sequence))\n"})}),"\n",(0,r.jsx)(n.h2,{id:"communication-pattern-selection",children:"Communication Pattern Selection"}),"\n",(0,r.jsx)(n.p,{children:"Choosing the right communication pattern is crucial for effective robotic system design:"}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-topics-publishsubscribe",children:"When to Use Topics (Publish/Subscribe)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sensor data streams"}),"\n",(0,r.jsx)(n.li,{children:"Robot state broadcasting"}),"\n",(0,r.jsx)(n.li,{children:"Event notifications"}),"\n",(0,r.jsx)(n.li,{children:"Many-to-many communication"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-services",children:"When to Use Services"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configuration requests"}),"\n",(0,r.jsx)(n.li,{children:"Single calculations"}),"\n",(0,r.jsx)(n.li,{children:"Synchronous operations"}),"\n",(0,r.jsx)(n.li,{children:"One-to-one communication"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-actions",children:"When to Use Actions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Long-running tasks"}),"\n",(0,r.jsx)(n.li,{children:"Tasks requiring progress feedback"}),"\n",(0,r.jsx)(n.li,{children:"Operations that might need cancellation"}),"\n",(0,r.jsx)(n.li,{children:"Complex robot behaviors"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"network-communication-in-ros-2",children:"Network Communication in ROS 2"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses DDS (Data Distribution Service) as its middleware, which handles network communication:"}),"\n",(0,r.jsx)(n.h3,{id:"dds-implementation-options",children:"DDS Implementation Options"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fast DDS (default)"}),"\n",(0,r.jsx)(n.li,{children:"Cyclone DDS"}),"\n",(0,r.jsx)(n.li,{children:"RTI Connext DDS"}),"\n",(0,r.jsx)(n.li,{children:"Eclipse Zenoh"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-configuration",children:"Network Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Setting the ROS domain ID to isolate networks\r\nexport ROS_DOMAIN_ID=1\r\n\r\n# Setting the DDS discovery server\r\nexport RMW_IMPLEMENTATION=rmw_fastrtps_cpp\n"})}),"\n",(0,r.jsx)(n.h2,{id:"advanced-communication-patterns",children:"Advanced Communication Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"latched-topics",children:"Latched Topics"}),"\n",(0,r.jsx)(n.p,{children:"Latched topics keep the last published message and send it to new subscribers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, QoSDurabilityPolicy\r\n\r\nlatched_qos = QoSProfile(\r\n    depth=1,\r\n    durability=QoSDurabilityPolicy.TRANSIENT_LOCAL\r\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"message-filters",children:"Message Filters"}),"\n",(0,r.jsx)(n.p,{children:"Message filters allow for synchronization of messages from multiple topics:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from message_filters import ApproximateTimeSynchronizer, Subscriber\r\n\r\n# Example: synchronizing camera image and depth data\r\nimage_sub = Subscriber(self, Image, 'camera/image')\r\ndepth_sub = Subscriber(self, Image, 'camera/depth')\r\n\r\nats = ApproximateTimeSynchronizer([image_sub, depth_sub], queue_size=5, slop=0.1)\r\nats.registerCallback(self.sync_callback)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"message-size",children:"Message Size"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Large messages can impact performance"}),"\n",(0,r.jsx)(n.li,{children:"Consider compression for large data (e.g., images)"}),"\n",(0,r.jsx)(n.li,{children:"Limit the frequency of large message publishing"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-bandwidth",children:"Network Bandwidth"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Monitor network usage in multi-robot systems"}),"\n",(0,r.jsx)(n.li,{children:"Use QoS settings to optimize for bandwidth"}),"\n",(0,r.jsx)(n.li,{children:"Consider data preprocessing on the publisher side"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cpu-usage",children:"CPU Usage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Be mindful of callback execution time"}),"\n",(0,r.jsx)(n.li,{children:"Use threading for CPU-intensive operations"}),"\n",(0,r.jsx)(n.li,{children:"Monitor node performance with tools"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"debugging-ros-2-communication",children:"Debugging ROS 2 Communication"}),"\n",(0,r.jsx)(n.h3,{id:"tools-for-analysis",children:"Tools for Analysis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 topic list"}),": List all topics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 topic echo <topic_name>"}),": View topic messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 node list"}),": List all nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 run rqt_graph rqt_graph"}),": Visualize the node graph"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-debugging-workflow",children:"Example Debugging Workflow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all available topics\r\nros2 topic list\r\n\r\n# Check what messages are being published to a specific topic\r\nros2 topic echo /sensor_data\r\n\r\n# Find the rate of messages on a topic\r\nros2 topic hz /sensor_data\r\n\r\n# Check the type of messages on a topic\r\nros2 topic type /sensor_data\r\n\r\n# Get information about a topic\r\nros2 topic info /sensor_data\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-architecture-for-humanoid-robots",children:"ROS 2 Architecture for Humanoid Robots"}),"\n",(0,r.jsx)(n.p,{children:"Humanoid robots have complex communication needs, requiring careful architecture design:"}),"\n",(0,r.jsx)(n.h3,{id:"sensor-integration-architecture",children:"Sensor Integration Architecture"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"High-frequency sensor streams (IMU, joint encoders) via topics"}),"\n",(0,r.jsx)(n.li,{children:"Camera data with appropriate QoS settings"}),"\n",(0,r.jsx)(n.li,{children:"Sensor fusion nodes to combine multiple inputs"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"control-architecture",children:"Control Architecture"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Motion planning using services for configuration"}),"\n",(0,r.jsx)(n.li,{children:"Walking pattern generation as actions"}),"\n",(0,r.jsx)(n.li,{children:"Low-level control with high-frequency topics"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"diagram-humanoid-robot-communication-architecture",children:"Diagram: Humanoid Robot Communication Architecture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'graph TB\r\n    subgraph "Sensors"\r\n        A[IMU Node]\r\n        B[Joint State Node]\r\n        C[Camera Node]\r\n        D[Force/Torque Node]\r\n    end\r\n    \r\n    subgraph "Processing"\r\n        E[State Estimator]\r\n        F[Perception]\r\n        G[Planning]\r\n        H[Control]\r\n    end\r\n    \r\n    subgraph "Actuators"\r\n        I[Motor Controllers]\r\n    end\r\n\r\n    A --\x3e E\r\n    B --\x3e E\r\n    C --\x3e F\r\n    D --\x3e E\r\n    E --\x3e G\r\n    F --\x3e G\r\n    G --\x3e H\r\n    H --\x3e I\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use consistent, descriptive names"}),"\n",(0,r.jsx)(n.li,{children:"Follow ROS 2 naming standards"}),"\n",(0,r.jsx)(n.li,{children:"Use underscores instead of camelCase"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement proper error handling in nodes"}),"\n",(0,r.jsx)(n.li,{children:"Use logging effectively"}),"\n",(0,r.jsx)(n.li,{children:"Handle network disconnections gracefully"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"resource-management",children:"Resource Management"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Properly destroy nodes and subscriptions"}),"\n",(0,r.jsx)(n.li,{children:"Monitor memory usage in long-running nodes"}),"\n",(0,r.jsx)(n.li,{children:"Implement appropriate cleanup routines"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a node that publishes joint states and another that subscribes to them to calculate the robot's center of mass."}),"\n",(0,r.jsx)(n.li,{children:"Implement a service for changing robot operational modes (e.g., from walking to manipulation)."}),"\n",(0,r.jsx)(n.li,{children:"Design an action for humanoid walking that provides step-by-step feedback."}),"\n",(0,r.jsx)(n.li,{children:"Create a node that visualizes the ROS 2 graph of your humanoid robot system."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quiz",children:"Quiz"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"What does DDS stand for in ROS 2?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A) Dynamic Data System"}),"\n",(0,r.jsx)(n.li,{children:"B) Data Distribution Service"}),"\n",(0,r.jsx)(n.li,{children:"C) Distributed Development System"}),"\n",(0,r.jsx)(n.li,{children:"D) Data Definition Service"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Which communication pattern is best for long-running tasks with feedback?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A) Topics"}),"\n",(0,r.jsx)(n.li,{children:"B) Services"}),"\n",(0,r.jsx)(n.li,{children:"C) Actions"}),"\n",(0,r.jsx)(n.li,{children:"D) Parameters"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"What is the primary purpose of Quality of Service (QoS) settings in ROS 2?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A) To define the data types of messages"}),"\n",(0,r.jsx)(n.li,{children:"B) To control the network protocol used"}),"\n",(0,r.jsx)(n.li,{children:"C) To specify communication reliability and performance characteristics"}),"\n",(0,r.jsx)(n.li,{children:"D) To encrypt ROS 2 communications"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"reflection",children:"Reflection"}),"\n",(0,r.jsx)(n.p,{children:"Consider how the different communication patterns in ROS 2 affect the design of robotic systems. How does the choice between topics, services, and actions impact the reliability, performance, and maintainability of a humanoid robot system? What are the trade-offs between synchronous and asynchronous communication patterns in safety-critical robotic applications?"})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var r=i(6540);const s={},o=r.createContext(s);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);